WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTableView",(function(t,e,l,o,s,i,n){e.wtObj=this;const c=this,r=t.WT,d=document.body.classList.contains("Wt-rtl");function a(t){return d?r.isGecko?-t.scrollLeft:t.scrollWidth-t.clientWidth-t.scrollLeft:t.scrollLeft}let f=0,h=0,u=0,p=0,g=0,m=0===o,y=!1,b=!1,w=0,T=0,N=0,v=0;this.onContentsContainerScroll=function(){T=s.scrollLeft=l.scrollLeft;w=i.scrollTop=l.scrollTop;l.clientWidth&&l.clientHeight&&0===g&&(l.scrollTop<u||l.scrollTop>p||l.scrollLeft<f||l.scrollLeft>h)&&t.emit(e,"scrolled",Math.round(a(l)),Math.round(l.scrollTop),Math.round(l.clientWidth),Math.round(l.clientHeight))};l.wtResize=function(i,n,c,r){if(!m){i.scrollTop=o;i.onscroll();m=!0}if(n-N>(h-f)/2||c-v>(p-u)/2){N=n;v=c;const l=i.clientHeight===i.firstChild.offsetHeight?-1:i.clientHeight;t.emit(e,"scrolled",Math.round(a(i)),Math.round(i.scrollTop),Math.round(i.clientWidth),Math.round(l))}const d=s.offsetHeight,g=s.closest(".Wt-tableview").offsetHeight-2;l.style.height=g-d+"px";l.style.width=s.style.width};function x(t){let e=0;for(const l of t.parentNode.childNodes){if(l.isEqualNode(t))return e;e++}return-1}function E(t){let e=-1,l=-1,o=!1,s=!1,i=null,c=r.target(t);for(;c&&void 0!==c.classList&&!c.classList.contains("Wt-tv-contents");){if(c.classList.contains("Wt-tv-c")){"true"===c.getAttribute("drop")&&(s=!0);c.classList.contains(n)&&(o=!0);i=c;c=c.parentNode;e=1*c.className.split(" ")[0].substring(7);l=x(i);break}c=c.parentNode}return{columnId:e,rowIdx:l,selected:o,drop:s,el:i}}function L(){return r.pxself(l.firstChild,"lineHeight")}let W,S=null;this.mouseDown=function(l,o){r.capture(null);const s=E(o);if(!o.ctrlKey&&!o.shiftKey){const l={ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,target:o.target,srcElement:o.srcElement,type:o.type,which:o.which,touches:o.touches,changedTouches:o.changedTouches,pageX:o.pageX,pageY:o.pageY,clientX:o.clientX,clientY:o.clientY};S=setTimeout((function(){"true"===e.getAttribute("drag")&&function(t){return t.el.classList.contains(n)}(s)&&t._p_.dragStart(e,l)}),400)}};this.mouseUp=function(){clearTimeout(S)};this.resizeHandleMDown=function(o,n){const d=o.parentNode;let a=-(r.pxself(d,"width")-1),f=1e4;document.body.classList.contains("Wt-rtl")&&([a,f]=[-f,-a]);new r.SizeHandle(r,"h",o.offsetWidth,e.offsetHeight,a,f,"Wt-hsh2",(function(o){!function(o,n){const d=document.body.classList.contains("Wt-rtl");d&&(n=-n);const a=o.className.split(" ")[0],f=1*a.substring(7),h=o.parentNode,u=h.parentNode!==s,p=u?i.firstChild:l.firstChild,g=p.firstChild,m=p.querySelector("."+a),y=r.pxself(o,"width")-1+n;let b=o.nextSibling,w=m.nextSibling;const T=r.pxself(h,"width")+n+"px";h.style.width=p.style.width=g.style.width=T;if(u){i.style.width=T;i.firstChild.style.width=T;l.style.left=T;s.style.left=T}o.style.width=y+1+"px";m.style.width=y+7+"px";t.layouts2.adjust(e.childNodes[0].id,[[1,1]]);for(;b;b=b.nextSibling)if(w){d?w.style.right=r.pxself(w,"right")+n+"px":w.style.left=r.pxself(w,"left")+n+"px";w=w.nextSibling}t.emit(e,"columnResized",f,parseInt(y));c.autoJavaScript()}(d,o)}),o,e,n,-2,-1)};let C,H,k=!1,I=!1,M=0;this.touchStart=function(t,e){C=t;H=e;I=!0;if(e.touches.length>1){clearTimeout(W);W=setTimeout((function(){R(t,e)}),1e3);M=e.touches.length}else{clearTimeout(W);M=1}};function R(l,o){t.emit(e,{name:"itemTouchSelectEvent",eventObject:l,event:o})}this.touchMove=function(){W&&clearTimeout(W);k=!0};this.touchEnd=function(t,e){W&&1!==M?clearTimeout(W):I&&!k&&0===e.touches.length&&1===M&&R(C,H);k=!1;I=!1};this.scrolled=function(t,e,l,o){f=t;h=e;u=l;p=o};this.resetScroll=function(){s.scrollLeft=T;l.scrollLeft=T;l.scrollTop=w;i.scrollTop=w};this.setScrollToPending=function(){g+=1};this.scrollToPx=function(t,e){w=e;T=t;this.resetScroll()};this.scrollTo=function(t,e,o){g>0&&(g-=1);if(-1!==e){const t=l.scrollTop,s=l.clientHeight;0===o&&(t+s<e?o=1:e<t&&(o=2));switch(o){case 1:l.scrollTop=e;break;case 2:l.scrollTop=e-(s-L());break;case 3:l.scrollTop=e-(s-L())/2}l.onscroll()}};this.setItemDropsEnabled=function(t){y=t};this.setRowDropsEnabled=function(t){b=t};function D(t,e,l){if(l){const l=document.createElement("div");l.className="Wt-drop-site-"+e;t.style.position="relative";t.appendChild(l);t.dropVisual=l}else{t.style.position="";t.dropVisual.remove();delete t.dropVisual}}function A(t,e,o){if(-1===t){D(s,"bottom",o);return}if("top"===e&&t>0){t-=1;e="bottom"}const i=l.firstChild.firstChild;for(const l of i.childNodes){D(l.childNodes[t],e,o)}}function K(){const t=l.firstChild.firstChild.firstChild;return t?t.childNodes.length:0}let j=null,O=null;e.handleDragDrop=function(l,o,s,i,n){if(j){j.className=j.classNameOrig;j=null}if(O){A(O.row,O.side,!1);O=null}if("end"===l)return;const c=E(s);if(null!==c.ele)if(!c.selected&&c.drop&&y)if("drop"===l)t.emit(e,{name:"dropEvent",eventObject:o,event:s},c.rowIdx,c.columnId,i,n);else{o.className="Wt-valid-drop";j=c.el;j.classNameOrig=j.className;j.className=j.className+" Wt-drop-site"}else if(!c.selected&&b){if(!c.columnId){c.el=null;c.rowIdx=-1}const r=c.rowIdx,d=c.columnId,a="bottom";if("drop"===l)t.emit(e,{name:"rowDropEvent",eventObject:o,event:s},r,d,i,n,a);else{o.className="Wt-valid-drop";O={row:c.el?r:K()-1,side:a};A(O.row,O.side,!0)}}else o.className=""};this.onkeydown=function(t){const e=t||window.event;if(9===e.keyCode){r.cancelEvent(e);const o=E(e);if(!o.el)return;let s=o.el.parentNode;const i=x(o.el),n=x(s),c=s.parentNode.childNodes.length,d=s.childNodes.length,a=e.shiftKey;let f,h=!1,u=i;for(;;){for(;a?u>=0:u<d;u=a?u-1:u+1){f=u!==i||h?a?c-1:0:a?n-1:n+1;for(;a?f>=0:f<c;f=a?f-1:f+1){if(u===i&&f===n)return;s=s.parentNode.childNodes[f];const p=s.childNodes[u].querySelectorAll("input, select, textarea, button");if(p.length>0){setTimeout((function(){p.forEach((t=>t.dispatchEvent(new Event("focus",{bubbles:!0}))));p.forEach((t=>t.dispatchEvent(new Event("select",{bubbles:!0}))))}),0);return}}}u=a?d-1:0;h=!0}}else if(e.keyCode>=37&&e.keyCode<=40){const g=r.target(e);function l(t){return r.hasTag(t,"INPUT")&&"text"===t.type||r.hasTag(t,"TEXTAREA")}if(r.hasTag(g,"SELECT"))return;const m=E(e);if(!m.el)return;let y=m.el.parentNode,b=x(m.el),w=x(y);const T=y.parentNode.childNodes.length,N=y.childNodes.length;switch(e.keyCode){case 39:if(l(g)){if(r.getSelectionRange(g).start!==g.value.length)return}w++;break;case 38:b--;break;case 37:if(l(g)){if(0!==r.getSelectionRange(g).start)return}w--;break;case 40:b++;break;default:return}r.cancelEvent(e);if(b>-1&&b<N&&w>-1&&w<T){y=y.parentNode.childNodes[w];const v=y.childNodes[b].querySelectorAll("input, select, textarea, button");if(v.length>0){setTimeout((function(){v.forEach((t=>t.dispatchEvent(new Event("focus",{bubbles:!0}))))}),0);return}}}};this.autoJavaScript=function(){if(null===e.parentNode){e=l=s=null;this.autoJavaScript=function(){};return}if(r.isHidden(e))return;if(!(r.isIE||I||w===l.scrollTop&&T===l.scrollLeft)){void 0===T?c&&r.isGecko?s.scrollLeft=l.scrollLeft=T=0:T=l.scrollLeft:s.scrollLeft=l.scrollLeft=T;i.scrollTop=l.scrollTop=w}let o=e.offsetWidth-r.px(e,"borderLeftWidth")-r.px(e,"borderRightWidth");const n=l.offsetWidth-l.clientWidth;o-=i.clientWidth;if(o>200&&o!==l.tw){l.tw=o;l.style.width=o+"px";s.style.width=o-n+"px"}const c=document.body.classList.contains("Wt-rtl");c?s.style.marginLeft=n+"px":s.style.marginRight=n+"px";const d=l.offsetHeight-l.clientHeight,a=i.style;if(a&&a.marginBottom!==d+"px"){a.marginBottom=d+"px";t.layouts2.adjust(e.childNodes[0].id,[[1,0]])}}}));