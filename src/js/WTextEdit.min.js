WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTextEdit",(function(e,t){t.wtObj=this;let i,o,n=0;const s=this,r=e.WT;let d;tinymce.dom.Event.domLoaded||(tinymce.dom.Event.domLoaded=!0);tinyMCE.init({mode:"none"});this.render=function(i,o,n){d=o;t.ed=new tinymce.Editor(t.id,i,tinymce.EditorManager);t.ed.render();n&&(tinymce.EditorManager.majorVersion<4?t.ed.onChange.add((function(){e.emit(t,"change")})):t.ed.on("change",(function(){e.emit(t,"change")})));setTimeout((function(){e.emit(t,"render")}),0)};this.init=function(){const e=r.getElement(t.id+"_ifr");let n,a;if(tinymce.EditorManager.majorVersion<4){const t=e.parentNode.parentNode.parentNode.parentNode;a=t;n=t.parentNode}else{n=e.parentNode.parentNode.parentNode}if(a){a.style.cssText="width:100%;"+d;t.style.height=a.offsetHeight+"px"}n.wtResize=t.wtResize;r.isGecko?setTimeout((function(){s.wtResize(t,i,o,!0)}),100):s.wtResize(t,i,o,!0);e.contentDocument.body.addEventListener("paste",(function(e){const i=e.clipboardData||e.originalEvent.clipboardData;function o(e){return 0===e.indexOf("image/")}if(i&&i.types)for(let n=0,s=i.types.length;n<s;++n){const s=i.types[n];if(o(s)||o(s.type)){const o=i.items[n].getAsFile(),s=new FileReader;s.onload=function(e){t.ed.insertContent('<img src="'+this.result+'"></img>')};s.readAsDataURL(o);r.cancelEvent(e)}}}))};this.wtResize=function(d,a,l,c){if(l<0)return;const p=l,h=r.getElement(d.id+"_ifr");if(h){let c,f,m=0;m=r.px(d,"marginTop")+r.px(d,"marginBottom");r.boxSizing(d)||(m+=r.px(d,"borderTopWidth")+r.px(d,"borderBottomWidth")+r.px(d,"paddingTop")+r.px(d,"paddingBottom"));d.style.height=l-m+"px";const y="absolute"!==t.style.position;if(tinymce.EditorManager.majorVersion<4){const e=h.parentNode.parentNode,t=e.parentNode.parentNode;f=t;c=t.parentNode;y||void 0===a||(c.style.width=a-2+"px");for(let i=0,o=t.rows.length;i<o;i++)t.rows[i]!==e&&(l-=t.rows[i].offsetHeight)}else{let e;e=tinymce.EditorManager.majorVersion<5?h.parentNode:h.parentNode.parentNode;const t=e.parentNode;c=t.parentNode;y||void 0===a||(c.style.width=a-2+"px");for(let i=0,o=t.childNodes.length;i<o;i++)t.childNodes[i]!==e&&(l-=t.childNodes[i].offsetHeight+1);l-=1}if(tinymce.EditorManager.majorVersion<5&&l<0){if(n<10){const e=100*Math.pow(2,n);setTimeout((function(){s.wtResize(t,i,o,!0)}),e)}n+=1;return}l+="px";if(y)if(tinymce.EditorManager.majorVersion<5){c.style.position="static";c.style.display="block"}else c.style.height=p+"px";else{c.style.position=d.style.position;c.style.left=d.style.left;c.style.top=d.style.top;!y&&f&&(f.style.width=a+"px");if(f){f.style.height=l+"px";c.style.height=d.style.height}}if(tinymce.EditorManager.majorVersion<5&&h.style.height!==l){n=0;h.style.height=l;e.layouts2&&e.layouts2.setElementDirty(t)}}else{i=a;o=l}};o=t.offsetHeight;i=t.offsetWidth}));